{

  "$schema": "https://vega.github.io/schema/vega-lite/v4.json", 

  "data": {
    "url": "https://raw.githubusercontent.com/dervlascully/TourDeFrance/main/TourDeFranceData.csv", 
    "format": {
      "type": "csv" }
  }, 




  "transform": [
    {
      "filter": "datum.Weight > 0"}, 
    {
      "filter": "datum.Height > 0" },
      {
      "calculate": 
      "datum.Weight / (datum.Height * datum.Height)",         
      "as": "BMI"}
  ],

  "repeat": {
    "column": ["Weight", "Height", "BMI"]
  },

  "spec": {
    "vconcat": [
      {
        "mark" : "bar",


        "height" : 300,
        "width" : 300,

        "encoding":{
          "x" : {
            "bin" : {"maxbins" : 20},
            "field" :  {"repeat": "column"},
            "type" : "quantitative",
            "axis": 
              {
                "labelFontSize" : 10,
                "titleFontSize" : 10,
                "titlePadding" : 15,
                "tickCount" : 10,
                "offset": 5,
                "title" : null
              }           
          },

          "y":{
            "aggregate" : "count",
            "type":"quantitative",
            "axis": 
              {
                "labelFontSize" : 10,
                "titleFontSize" : 10,
                "titlePadding" : 15,
                "tickCount" : 10,
                "offset": 5
              }  
          },
          "opacity" : {"value": 0.8} 
        }
      },

      {
          "mark" : "tick",
          "width" : 300,

          "encoding": {
            "x" : 
            {
              "field" :  {"repeat": "column"},
              "type" : "quantitative",
              "scale": {"zero": false},
              "axis": 
              {
                "labelFontSize" : 10,
                "titleFontSize" : 12,
                "titlePadding" : 15,
                "tickCount" : 10,
                "offset": 5
              }   
            },
            "tooltip": [
                {
                  "field" : "Winner Name",        
                  "type" : "nominal"
                },
                {
                  "field" : "Weight",
                  "title" : "Weight (kg)",
                  "type" : "nominal"
                },
                {
                  "field" : "Height",
                  "title" : "Height (m)",
                  "type" : "nominal"
                },
                {
                  "field" : "BMI",
                  "type" : "nominal",
                  "format": ".2f"
                }
              
            ]
          }
      }
    ]
  },
  "resolve": 
  {
    "scale": 
    {
      "x": "shared"
    }
  },

  "title": 
  {
    "text": "Histogram with Strip Plot of Weight, Height, BMI", 
    "anchor": "middle",
    "fontSize" : 14,
    "subtitle" : "Tour De France Winners",
    "subtitlePadding" : 10,
    "subtitleFontSize" : 12,
    "subtitleFontWeight" : "bold"
  }
}



